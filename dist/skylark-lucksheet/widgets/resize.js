/**
 * skylark-lucksheet - A version of lucksheet.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["../methods/luckysheetConfigsetting","../store","../locale/locale","../widgets/tooltip"],function(e,t,o,i){"use strict";let l=0,n=0;function s(s=!0){e.showinfobar?($("#luckysheet_info_detail").show(),t.infobarHeight=document.querySelector("#luckysheet_info_detail").offsetHeight):(t.infobarHeight=0,$("#luckysheet_info_detail").hide()),t.toobarObject&&t.toobarObject.toobarElements&&0===t.toobarObject.toobarElements.length?($("#"+t.container).find(".luckysheet-wa-editor").hide(),t.toolbarHeight=0):($("#"+t.container).find(".luckysheet-wa-editor").show(),t.toolbarHeight=document.querySelector("#"+t.container+" .luckysheet-wa-editor").offsetHeight),function(){if(!e.initShowsheetbarConfig){e.initShowsheetbarConfig=!0;const t={add:!0,menu:!0,sheet:!0};if(!e.showsheetbar)for(let e in t)t[e]=!1;"{}"!==JSON.stringify(e.showsheetbarConfig)&&Object.assign(t,e.showsheetbarConfig),e.showsheetbarConfig=t}const o=e.showsheetbarConfig;let i=0;for(let e in o)if(!o[e])switch(e){case"add":$("#luckysheet-sheets-add").hide(),i++;break;case"menu":$("#luckysheet-sheets-m").hide(),i++;break;case"sheet":$("#luckysheet-sheet-container").hide(),$("#luckysheet-sheets-leftscroll").hide(),$("#luckysheet-sheets-rightscroll").hide(),i++}3===i?($("#"+t.container).find("#luckysheet-sheet-area").hide(),t.sheetBarHeight=0):($("#"+t.container).find("#luckysheet-sheet-area").show(),t.sheetBarHeight=31)}(),function(){if(!e.initStatisticBarConfig){e.initStatisticBarConfig=!0;const t={count:!0,view:!0,zoom:!0};if(!e.showstatisticBar)for(let e in t)t[e]=!1;"{}"!==JSON.stringify(e.showstatisticBarConfig)&&Object.assign(t,e.showstatisticBarConfig),e.showstatisticBarConfig=t}const o=e.showstatisticBarConfig;let i=0;for(let e in o)if(!o[e])switch(e){case"count":$("#luckysheet-sta-content").hide(),i++;break;case"view":$(".luckysheet-print-viewList").hide(),i++;break;case"zoom":$("#luckysheet-zoom-content").hide(),i++}3===i?($("#"+t.container).find(".luckysheet-stat-area").hide(),t.statisticBarHeight=0):($("#"+t.container).find(".luckysheet-stat-area").show(),t.statisticBarHeight=23)}();const r=document.querySelector("#"+t.container+" .luckysheet-wa-calculate");e.sheetFormulaBar?(r.style.display="block",t.calculatebarHeight=r.offsetHeight):(r.style.display="none",t.calculatebarHeight=0),$("#"+t.container).find(".luckysheet-grid-container").css("top",t.toolbarHeight+t.infobarHeight+t.calculatebarHeight),l=$("#"+t.container).width(),e.showConfigWindowResize&&($("#luckysheet-modal-dialog-slider-pivot").is(":visible")?l-=$("#luckysheet-modal-dialog-slider-pivot").outerWidth():$(".chartSetting").is(":visible")?l-=$(".chartSetting").outerWidth():$("#luckysheet-modal-dialog-slider-alternateformat").is(":visible")&&(l-=$("#luckysheet-modal-dialog-slider-alternateformat").outerWidth()),$("#luckysheet-modal-dialog-slider-protection").is(":visible")&&(l-=$("#luckysheet-modal-dialog-slider-protection").outerWidth()));const a=o().toolbar;let h=!1,u=`<div class="luckysheet-toolbar-button luckysheet-inline-block" data-tips="${a.toolMoreTip}" id="luckysheet-icon-morebtn" role="button" style="user-select: none;"> \n            <div class="luckysheet-toolbar-button-outer-box luckysheet-inline-block" style="user-select: none;"> \n                <div class="luckysheet-toolbar-button-inner-box luckysheet-inline-block" style="user-select: none;">\n\n                    <div class="luckysheet-toolbar-menu-button-caption luckysheet-inline-block" style="user-select: none;">\n                        ${a.toolMore}\n                    </div> \n                    <div class="luckysheet-toolbar-menu-button-dropdown luckysheet-inline-block iconfont luckysheet-iconfont-xiayige" style="user-select: none;font-size:12px;">\n                    </div>\n\n                </div> \n            </div>\n         </div>`,d='<div id="luckysheet-icon-morebtn-div" class="luckysheet-wa-editor" style="position:absolute;top:'+(t.infobarHeight+t.toolbarHeight+$("#"+t.container).offset().top+$("body").scrollTop())+'px; right:0px;z-index:1003;padding:5.5px;display:none;height:auto;white-space:initial;"></div>';0==$("#luckysheet-icon-morebtn-div").length&&$("body").append(d),$("#luckysheet-icon-morebtn-div").hide(),$("#luckysheet-icon-morebtn-div > div").each(function(){const e=$(this)[0],t=$("#luckysheet-wa-editor")[0];t.appendChild(document.createTextNode(" ")),t.appendChild(e)}),$("#luckysheet-icon-morebtn").remove();const b=t.toobarObject.toobarWidths,y=t.toobarObject.toobarElements;let f=0;if(void 0!=b){for(let e=b.length-1;e>=0;e--)if(b[e]<l-90){(f=e)<b.length-1&&(h=!0);break}for(let e=f;e<y.length;e++){const t=y[e];if(t instanceof Array)for(const e of t)$("#luckysheet-icon-morebtn-div").append($(`${e}`));else $("#luckysheet-icon-morebtn-div").append($(`${t}`))}h&&($("#luckysheet-wa-editor").append(u),$("#luckysheet-icon-morebtn").click(function(){let e=$(window).width()-$("#luckysheet-icon-morebtn").offset().left-$("#luckysheet-icon-morebtn").width()+$("body").scrollLeft();if($("#luckysheet-icon-morebtn-div").toggle().css("right",e<0?0:e),$(this).find(".luckysheet-toolbar-menu-button-caption").text().indexOf(a.toolMore)>-1){const e=`\n                <div class="luckysheet-toolbar-menu-button-caption luckysheet-inline-block" style="user-select: none;">\n                    ${a.toolClose}\n                </div> \n                <div class="luckysheet-toolbar-menu-button-dropdown luckysheet-inline-block iconfont luckysheet-iconfont-shangyige" style="user-select: none;font-size:12px;">\n                </div>\n                `;$(this).find(".luckysheet-toolbar-button-inner-box").html(e)}else{const e=`\n                <div class="luckysheet-toolbar-menu-button-caption luckysheet-inline-block" style="user-select: none;">\n                    ${a.toolMore}\n                </div> \n                <div class="luckysheet-toolbar-menu-button-dropdown luckysheet-inline-block iconfont luckysheet-iconfont-xiayige" style="user-select: none;font-size:12px;">\n                </div>\n                `;$(this).find(".luckysheet-toolbar-button-inner-box").html(e)}}),$("#luckysheet-icon-morebtn-div .luckysheet-toolbar-button-split-left").off("hover").hover(function(){$(this).next(".luckysheet-toolbar-button-split-right").addClass("luckysheet-toolbar-button-split-right-hover")},function(){$(this).next(".luckysheet-toolbar-button-split-right").removeClass("luckysheet-toolbar-button-split-right-hover")}),$("#luckysheet-icon-morebtn-div .luckysheet-toolbar-button-split-right").off("hover").hover(function(){$(this).prev(".luckysheet-toolbar-button-split-left").addClass("luckysheet-toolbar-button-hover")},function(){$(this).prev(".luckysheet-toolbar-button-split-left").removeClass("luckysheet-toolbar-button-hover")}),i.createHoverTip("#luckysheet-icon-morebtn-div",".luckysheet-toolbar-menu-button, .luckysheet-toolbar-button, .luckysheet-toolbar-combo-button")),$("#"+t.container+" .luckysheet-wa-editor .luckysheet-toolbar-button-split-left").off("hover").hover(function(){$(this).next(".luckysheet-toolbar-button-split-right").addClass("luckysheet-toolbar-button-split-right-hover")},function(){$(this).next(".luckysheet-toolbar-button-split-right").removeClass("luckysheet-toolbar-button-split-right-hover")}),$("#"+t.container+" .luckysheet-wa-editor .luckysheet-toolbar-button-split-right").off("hover").hover(function(){$(this).prev(".luckysheet-toolbar-button-split-left").addClass("luckysheet-toolbar-button-hover")},function(){$(this).prev(".luckysheet-toolbar-button-split-left").removeClass("luckysheet-toolbar-button-hover")}),n=$("#"+t.container).height(),$("#"+t.container).find(".luckysheet").height(n-2).width(l-2),c(l,n),s&&t.refresh($("#luckysheet-cell-main").scrollLeft(),$("#luckysheet-cell-main").scrollTop()),t.invalidate()}}function c(e,o){null==e&&(e=$("#"+t.container).width()),null==o&&(o=$("#"+t.container).height()),t.cellmainHeight=o-(t.infobarHeight+t.toolbarHeight+t.calculatebarHeight+t.columnHeaderHeight+t.sheetBarHeight+t.statisticBarHeight),t.cellmainWidth=e-t.rowHeaderWidth,$("#luckysheet-cols-h-c, #luckysheet-cell-main").width(t.cellmainWidth),$("#luckysheet-cell-main").height(t.cellmainHeight),$("#luckysheet-rows-h").height(t.cellmainHeight-t.cellMainSrollBarSize),$("#luckysheet-scrollbar-y").height(t.cellmainHeight+t.columnHeaderHeight-t.cellMainSrollBarSize-3),$("#luckysheet-scrollbar-x").height(t.cellMainSrollBarSize),$("#luckysheet-scrollbar-y").width(t.cellMainSrollBarSize),$("#luckysheet-scrollbar-x").width(t.cellmainWidth).css("left",t.rowHeaderWidth-2),t.luckysheetTableContentHW=[t.cellmainWidth+t.rowHeaderWidth-t.cellMainSrollBarSize,t.cellmainHeight+t.columnHeaderHeight-t.cellMainSrollBarSize],$("#luckysheetTableContent, #luckysheetTableContentF").attr({width:Math.ceil(t.luckysheetTableContentHW[0]*t.devicePixelRatio),height:Math.ceil(t.luckysheetTableContentHW[1]*t.devicePixelRatio)}).css({width:t.luckysheetTableContentHW[0],height:t.luckysheetTableContentHW[1]}),$("#"+t.container).find("#luckysheet-grid-window-1").css("bottom",t.sheetBarHeight),$("#"+t.container).find(".luckysheet-grid-window").css("bottom",t.statisticBarHeight);let i=$("#luckysheet-grid-window-1").width();$("#luckysheet-freezebar-horizontal").find(".luckysheet-freezebar-horizontal-handle").css({width:i-10}).end().find(".luckysheet-freezebar-horizontal-drop").css({width:i-10});let l=$("#luckysheet-grid-window-1").height();$("#luckysheet-freezebar-vertical").find(".luckysheet-freezebar-vertical-handle").css({height:l-10}).end().find(".luckysheet-freezebar-vertical-drop").css({height:l-10})}return Object.assign(s,{changeSheetContainerSize:c,menuToolBarWidth:function(){const o=e.showtoolbar,i=e.showtoolbarConfig,l=t.toobarObject.toobarWidths=[],n=t.toobarObject.toobarElements=[],s=t.toobarObject.toobarConfig={undo:{ele:"#luckysheet-icon-undo",index:0},redo:{ele:"#luckysheet-icon-redo",index:1},paintFormat:{ele:["#luckysheet-icon-paintformat","#toolbar-separator-paint-format"],index:2},currencyFormat:{ele:"#luckysheet-icon-currency",index:3},percentageFormat:{ele:"#luckysheet-icon-percent",index:4},numberDecrease:{ele:"#luckysheet-icon-fmt-decimal-decrease",index:5},numberIncrease:{ele:"#luckysheet-icon-fmt-decimal-increase",index:6},moreFormats:{ele:["#luckysheet-icon-fmt-other","#toolbar-separator-more-format"],index:7},font:{ele:["#luckysheet-icon-font-family","#toolbar-separator-font-family"],index:8},fontSize:{ele:["#luckysheet-icon-font-size","#toolbar-separator-font-size"],index:9},bold:{ele:"#luckysheet-icon-bold",index:10},italic:{ele:"#luckysheet-icon-italic",index:11},strikethrough:{ele:"#luckysheet-icon-strikethrough",index:12},underline:{ele:"#luckysheet-icon-underline",index:13},textColor:{ele:["#luckysheet-icon-text-color","#luckysheet-icon-text-color-menu","#toolbar-separator-text-color"],index:14},fillColor:{ele:["#luckysheet-icon-cell-color","#luckysheet-icon-cell-color-menu"],index:15},border:{ele:["#luckysheet-icon-border-all","#luckysheet-icon-border-menu"],index:16},mergeCell:{ele:["#luckysheet-icon-merge-button","#luckysheet-icon-merge-menu","#toolbar-separator-merge-cell"],index:17},horizontalAlignMode:{ele:["#luckysheet-icon-align","#luckysheet-icon-align-menu"],index:18},verticalAlignMode:{ele:["#luckysheet-icon-valign","#luckysheet-icon-valign-menu"],index:19},textWrapMode:{ele:["#luckysheet-icon-textwrap","#luckysheet-icon-textwrap-menu"],index:20},textRotateMode:{ele:["#luckysheet-icon-rotation","#luckysheet-icon-rotation-menu","#toolbar-separator-text-rotate"],index:21},image:{ele:"#luckysheet-insertImg-btn-title",index:22},link:{ele:"#luckysheet-insertLink-btn-title",index:23},chart:{ele:"#luckysheet-chart-btn-title",index:24},postil:{ele:"#luckysheet-icon-postil",index:25},pivotTable:{ele:["#luckysheet-pivot-btn-title","#toolbar-separator-pivot-table"],index:26},function:{ele:["#luckysheet-icon-function","#luckysheet-icon-function-menu"],index:27},frozenMode:{ele:["#luckysheet-freezen-btn-horizontal","#luckysheet-icon-freezen-menu"],index:28},sortAndFilter:{ele:"#luckysheet-icon-autofilter",index:29},conditionalFormat:{ele:"#luckysheet-icon-conditionformat",index:30},dataVerification:{ele:"#luckysheet-dataVerification-btn-title",index:31},splitColumn:{ele:"#luckysheet-splitColumn-btn-title",index:32},screenshot:{ele:"#luckysheet-chart-btn-screenshot",index:33},findAndReplace:{ele:"#luckysheet-icon-seachmore",index:34},protection:{ele:"#luckysheet-icon-protection",index:35},print:{ele:"#luckysheet-icon-print",index:36}},c={undo:!0,redo:!0,paintFormat:!0,currencyFormat:!0,percentageFormat:!0,numberDecrease:!0,numberIncrease:!0,moreFormats:!0,font:!0,fontSize:!0,bold:!0,italic:!0,strikethrough:!0,underline:!0,textColor:!0,fillColor:!0,border:!0,mergeCell:!0,horizontalAlignMode:!0,verticalAlignMode:!0,textWrapMode:!0,textRotateMode:!0,image:!0,link:!0,chart:!0,postil:!0,pivotTable:!0,function:!0,frozenMode:!0,sortAndFilter:!0,conditionalFormat:!0,dataVerification:!0,splitColumn:!0,screenshot:!0,findAndReplace:!0,protection:!0,print:!0};if(!o)for(let e in c)c[e]=!1;"{}"!==JSON.stringify(i)&&(i.hasOwnProperty("undoRedo")&&(c.undo=c.redo=i.undoRedo,delete i.undoRedo),Object.assign(c,i));for(let e in c)if(c[e])n.push($.extend(!0,{},s[e]));else if(s[e].ele instanceof Array)for(const t of s[e].ele)$(t).remove();else $(s[e].ele).remove();n.sort(function(e,t){return e.index>t.index?1:-1}),n.forEach((e,t,o)=>{o[t]=e.ele,t!==n.length-1?e.ele instanceof Array?l.push($(e.ele[0]).offset().left):l.push($(e.ele).offset().left):e.ele instanceof Array?(l.push($(e.ele[0]).offset().left),l.push($(e.ele[0]).offset().left+$(e.ele[0]).outerWidth()+5)):(l.push($(e.ele).offset().left),l.push($(e.ele).offset().left+$(e.ele).outerWidth()+5))})}}),s});
//# sourceMappingURL=../sourcemaps/widgets/resize.js.map
