/**
 * skylark-lucksheet - A version of lucksheet.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["../utils/util","./validate","./format","../controllers/server","../controllers/luckysheetConfigsetting","../store"],function(t,e,l,n,r,i){"use strict";const{getObjType:o}=t,{isRealNull:a,isRealNum:s,valueIsError:f}=e,{genarate:c,update:u}=l;function v(t,e){let l,n="0.";if("TRUE"==t){if(void 0==e)return"w";{let t=parseInt(e);if(0==t)return"w0";n="w0.";for(let e=0;e<t;e++)n+="0";l=n}}else{if(void 0==e)return"General";{let t=parseInt(e);if(0==t)return"0";for(let e=0;e<t;e++)n+="0";l=n}}return l.toString()}return{setcellvalue:function(t,e,l,g){null==l&&(l=i.flowdata);let p,S=l[t][e];if("object"==o(g)?(null==S?S=g:(null!=g.f&&(S.f=g.f),null!=g.spl&&(S.spl=g.spl),null!=g.ct&&(S.ct=g.ct)),p="object"==o(g.v)?g.v.v:g.v):p=g,a(p))return"object"==o(S)?(delete S.m,delete S.v):S=null,void(l[t][e]=S);if((a(S)||("string"===o(S)||"number"===o(S))&&S===g)&&(S={}),"'"==p.toString().substr(0,1))S.m=p.toString().substr(1),S.ct={fa:"@",t:"s"},S.v=p.toString().substr(1),S.qp=1;else if(1==S.qp)S.m=p.toString(),S.ct={fa:"@",t:"s"},S.v=p.toString();else if("TRUE"===p.toString().toUpperCase())S.m="TRUE",S.ct={fa:"General",t:"b"},S.v=!0;else if("FALSE"===p.toString().toUpperCase())S.m="FALSE",S.ct={fa:"General",t:"b"},S.v=!1;else if(f(p))S.m=p.toString(),null!=S.ct?S.ct.t="e":S.ct={fa:"General",t:"e"},S.v=p;else if(null!=S.f&&s(p)&&!/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[12])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(p))if(S.v=parseFloat(p),null==S.ct&&(S.ct={fa:"General",t:"n"}),S.v==1/0||S.v==-1/0)S.m=S.v.toString();else if(S.v.toString().indexOf("e")>-1){let t;(t=1==S.v.toString().split(".").length?0:S.v.toString().split(".")[1].split("e")[0].length)>5&&(t=5),S.m=S.v.toExponential(t).toString()}else{let t=Math.round(1e9*S.v)/1e9;if(null==S.ct){let e=c(t);S.m=e[0].toString()}else{let e=u(S.ct.fa,t);S.m=e.toString()}}else if(null!=S.ct&&"@"==S.ct.fa)S.m=p.toString(),S.v=p;else if(null!=S.ct&&null!=S.ct.fa&&"General"!=S.ct.fa){s(p)&&(p=parseFloat(p));let t=u(S.ct.fa,p);t===p?(t=c(p),S.m=t[0].toString(),S.ct=t[1],S.v=t[2]):(S.m=t.toString(),S.v=p)}else if(s(p)&&!/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[12])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(p))if(p=parseFloat(p),S.v=parseFloat(p),S.ct={fa:"General",t:"n"},S.v==1/0||S.v==-1/0)S.m=S.v.toString();else{let t=c(S.v);S.m=t[0].toString()}else{let t=c(p);S.m=t[0].toString(),S.ct=t[1],S.v=t[2]}if(!n.allowUpdate&&!r.pointEdit&&null!=S.ct&&0==/^(w|W)((0?)|(0\.0+))$/.test(S.ct.fa)&&"n"==S.ct.t&&null!=S.v&&parseInt(S.v).toString().length>4){let t=v(r.autoFormatw.toString().toUpperCase(),r.accuracy);"General"!=t&&(S.ct.fa=t,S.m=u(t,S.v))}l[t][e]=S},setAccuracy:v}});
//# sourceMappingURL=../sourcemaps/global/setdata.js.map
