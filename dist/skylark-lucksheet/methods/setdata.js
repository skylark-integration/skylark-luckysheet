/**
 * skylark-lucksheet - A version of lucksheet.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["../utils/util","./validate","./format","./luckysheetConfigsetting","../store"],function(t,e,l,n,r){"use strict";const{getObjType:i}=t,{isRealNull:a,isRealNum:o,valueIsError:s}=e,{genarate:f,update:c}=l;function u(t,e){let l,n="0.";if("TRUE"==t){if(void 0==e)return"w";{let t=parseInt(e);if(0==t)return"w0";n="w0.";for(let e=0;e<t;e++)n+="0";l=n}}else{if(void 0==e)return"General";{let t=parseInt(e);if(0==t)return"0";for(let e=0;e<t;e++)n+="0";l=n}}return l.toString()}return{setcellvalue:function(t,e,l,v){null==l&&(l=r.flowdata);let g,p=l[t][e];if("object"==i(v)?(null==p?p=v:(null!=v.f&&(p.f=v.f),null!=v.spl&&(p.spl=v.spl),null!=v.ct&&(p.ct=v.ct)),g="object"==i(v.v)?v.v.v:v.v):g=v,a(g))return"object"==i(p)?(delete p.m,delete p.v):p=null,void(l[t][e]=p);if((a(p)||("string"===i(p)||"number"===i(p))&&p===v)&&(p={}),"'"==g.toString().substr(0,1))p.m=g.toString().substr(1),p.ct={fa:"@",t:"s"},p.v=g.toString().substr(1),p.qp=1;else if(1==p.qp)p.m=g.toString(),p.ct={fa:"@",t:"s"},p.v=g.toString();else if("TRUE"===g.toString().toUpperCase())p.m="TRUE",p.ct={fa:"General",t:"b"},p.v=!0;else if("FALSE"===g.toString().toUpperCase())p.m="FALSE",p.ct={fa:"General",t:"b"},p.v=!1;else if(s(g))p.m=g.toString(),null!=p.ct?p.ct.t="e":p.ct={fa:"General",t:"e"},p.v=g;else if(null!=p.f&&o(g)&&!/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[12])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(g))if(p.v=parseFloat(g),null==p.ct&&(p.ct={fa:"General",t:"n"}),p.v==1/0||p.v==-1/0)p.m=p.v.toString();else if(p.v.toString().indexOf("e")>-1){let t;(t=1==p.v.toString().split(".").length?0:p.v.toString().split(".")[1].split("e")[0].length)>5&&(t=5),p.m=p.v.toExponential(t).toString()}else{let t=Math.round(1e9*p.v)/1e9;if(null==p.ct){let e=f(t);p.m=e[0].toString()}else{let e=c(p.ct.fa,t);p.m=e.toString()}}else if(null!=p.ct&&"@"==p.ct.fa)p.m=g.toString(),p.v=g;else if(null!=p.ct&&null!=p.ct.fa&&"General"!=p.ct.fa){o(g)&&(g=parseFloat(g));let t=c(p.ct.fa,g);t===g?(t=f(g),p.m=t[0].toString(),p.ct=t[1],p.v=t[2]):(p.m=t.toString(),p.v=g)}else if(o(g)&&!/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[12])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(g))if(g=parseFloat(g),p.v=parseFloat(g),p.ct={fa:"General",t:"n"},p.v==1/0||p.v==-1/0)p.m=p.v.toString();else{let t=f(p.v);p.m=t[0].toString()}else{let t=f(g);p.m=t[0].toString(),p.ct=t[1],p.v=t[2]}if(!r.allowUpdate&&!n.pointEdit&&null!=p.ct&&0==/^(w|W)((0?)|(0\.0+))$/.test(p.ct.fa)&&"n"==p.ct.t&&null!=p.v&&parseInt(p.v).toString().length>4){let t=u(n.autoFormatw.toString().toUpperCase(),n.accuracy);"General"!=t&&(p.ct.fa=t,p.m=c(t,p.v))}l[t][e]=p},setAccuracy:u}});
//# sourceMappingURL=../sourcemaps/methods/setdata.js.map
