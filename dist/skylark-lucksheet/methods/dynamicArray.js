/**
 * skylark-lucksheet - A version of lucksheet.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["../utils/util","./get","../store"],function(t,e,l){"use strict";const{getObjType:r}=t,{getSheetIndex:a}=e;function n(t){let e={};if("array"==r(t))for(let a=0;a<t.length;a++){let n=t[a].r,c=t[a].c,f=t[a].f;if(null!=l.flowdata[n][c]&&null!=l.flowdata[n][c].f&&l.flowdata[n][c].f==f){n+"_"+c in e&&(e=i(e,n,c));let f=t[a].data,u=f.length,d=1;if("array"==r(f[0])&&(d=f[0].length),o({row:[n,n+u-1],column:[c,c+d-1]},l.flowdata))for(let t=0;t<u;t++)for(let l=0;l<d;l++){let a=n+t,i=c+l;"array"==r(f[0])?e[a+"_"+i]={v:f[t][l],r:n,c:c}:e[a+"_"+i]={v:f[t],r:n,c:c}}else e[n+"_"+c]={v:"#SPILL!",r:n,c:c}}}return e}function i(t,e,l){let r=t[e+"_"+l].r,a=t[e+"_"+l].c;for(let e in t)e==r+"_"+a?t[e].v="#SPILL!":t[e].r==r&&t[e].c==a&&delete t[e];return t}function o(t,e){let l=t.row[0],r=t.row[1],a=t.column[0],n=t.column[1],i=!0;for(let t=l;t<=r;t++)for(let r=a;r<=n;r++)if((t!=l||r!=a)&&null!=e[t][r]&&null!=e[t][r].v&&""!=e[t][r].v.toString()){i=!1;break}return i}return{dynamicArrayCompute:n,dynamicArraySpillEditCompute:i,dynamicArrayRangeIsAllNull:o,dynamicArrayHightShow:function(t,e){let i=null==l.luckysheetfile[a(l.currentSheetIndex)].dynamicArray?[]:l.luckysheetfile[a(l.currentSheetIndex)].dynamicArray,o=n(i);if(t+"_"+e in o&&"#SPILL!"!=o[t+"_"+e].v){let a,n,c=o[t+"_"+e].r,f=o[t+"_"+e].c,u=l.flowdata[c][f].f;for(let t=0;t<i.length;t++)i[t].f==u&&(a=i[t].data.length,n="array"==r(i[t].data[0])?i[t].data[0].length:1);let d=c+a-1,y=f+n-1,h=l.visibledatarow[d],s=c-1==-1?0:l.visibledatarow[c-1],g=l.visibledatacolumn[y],m=f-1==-1?0:l.visibledatacolumn[f-1];$("#luckysheet-dynamicArray-hightShow").css({left:m,width:g-m-1,top:s,height:h-s-1,display:"block"})}else $("#luckysheet-dynamicArray-hightShow").hide()}}});
//# sourceMappingURL=../sourcemaps/methods/dynamicArray.js.map
