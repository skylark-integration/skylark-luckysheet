/**
 * skylark-lucksheet - A version of lucksheet.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,e,a,s){"use strict";var i={page:1,pageSize:200,total:0,showTotal:!1,totalTxt:"共{total}条",noData:!1,showSkip:!1,showPN:!0,prevPage:"上一页",nextPage:"下一页",fastForward:0,selectOption:[],backFun:function(t){}};function n(e,a){this.element=t(e),this.settings=t.extend({},i,a),this.pageNum=1,this.pageList=[],this.pageTatol=0,this.init()}t.extend(n.prototype,{init:function(){this.element.empty(),this.viewHtml(),this.clickBtn()},creatHtml:function(t){t==this.settings.page?this.pageList.push('<button class="active" data-page='+t+">"+t+"</button>"):this.pageList.push("<button data-page="+t+">"+t+"</button>")},viewHtml:function(){var t=this.settings,e=0,a=[];if(t.total>0)e=Math.ceil(t.total/t.pageSize);else{if(!t.noData)return;e=1,t.page=1,t.total=0}if(this.pageTatol=e,this.pageNum=t.page,t.showTotal&&a.push('<div class="spage-total">'+t.totalTxt.replace(/\{(\w+)\}/gi,t.total)+"</div>"),a.push('<div class="spage-number">'),this.pageList=[],t.showPN&&(1==t.page?this.pageList.push('<button class="button-disabled" data-page="prev"><i class="prevBtn"></i></button>'):this.pageList.push('<button data-page="prev"><i class="prevBtn"></i></button>')),e<=6)for(var s=1;s<e+1;s++)this.creatHtml(s);else if(t.page<3){for(s=1;s<=3;s++)this.creatHtml(s);this.pageList.push('<button data-page="after" class="spage-after">...</button><button data-page='+e+">"+e+"</button>")}else if(t.page>e-3){this.pageList.push('<button data-page="1">1</button><button data-page="before" class="spage-before">...</button>');for(s=e-3;s<=e;s++)this.creatHtml(s)}else{this.pageList.push('<button data-page="1">1</button>'),t.page>3&&this.pageList.push('<button data-page="before" class="spage-before">...</button>');for(s=t.page-1;s<=Number(t.page)+1;s++)this.creatHtml(s);t.page<=e-3&&this.pageList.push('<button data-page="after" class="spage-after">...</button>'),this.pageList.push("<button data-page="+e+">"+e+"</button>")}if(t.showPN&&(t.page==e?this.pageList.push('<button class="button-disabled" data-page="next"><i class="nextBtn"></i></button>'):this.pageList.push('<button data-page="next"><i class="nextBtn"></i></button>')),a.push(this.pageList.join("")),a.push("</div>"),t.selectOption.length>0){for(var i='<select class="selectNum" id="selectNum">',n=0;n<=t.selectOption.length-1;n++)i+="<option value="+t.selectOption[n]+" ",t.pageSize===t.selectOption[n]?i+="selected>"+t.selectOption[n]+"行/页</option>":i+=">"+t.selectOption[n]+"行/页</option>";i+="</select>",a.push(i)}t.showSkip&&a.push('<div class="spage-skip">跳至&nbsp;<input type="text" class="luckysheet-mousedown-cancel" value="'+t.page+'"/>&nbsp;页&nbsp;&nbsp;</div>'),this.element.html(a.join(""))},clickBtn:function(){var e=this,a=this.settings,s=this.element,i=this.pageTatol;this.element.on("change","select",function(t){var s=parseInt(document.getElementById("selectNum").value);a.pageSize=s,a.page=1,e.element.empty(),e.viewHtml(),a.backFun(a)}),this.element.off("click","button"),this.element.on("click","button",function(){var n=t(this).data("page");switch(n){case"prev":a.page=a.page-1>=1?a.page-1:1,n=a.page;break;case"next":a.page=Number(a.page)+1<=i?Number(a.page)+1:i,n=a.page;break;case"before":a.page=a.page-a.fastForward>=1?a.page-a.fastForward:1,n=a.page;break;case"after":a.page=Number(a.page)+Number(a.fastForward)<=i?Number(a.page)+Number(a.fastForward):i,n=a.page;break;case"go":var p=parseInt(s.find("input").val());if(!(/^[0-9]*$/.test(p)&&p>=1&&p<=i))return;a.page=p,n=p;break;default:a.page=n}n!=e.pageNum&&(e.pageNum=a.page,e.viewHtml(),a.backFun(a))}),this.element.off("keyup","input"),this.element.on("keyup","input",function(t){if(13==t.keyCode){var n=parseInt(s.find("input").val());if(!(/^[0-9]*$/.test(n)&&n>=1&&n<=i&&n!=e.pageNum))return;a.page=n,e.pageNum=n,e.viewHtml(),a.backFun(a)}}),a.fastForward>0&&(s.find(".spage-after").hover(function(){t(this).html("&raquo;")},function(){t(this).html("...")}),s.find(".spage-before").hover(function(){t(this).html("&laquo;")},function(){t(this).html("...")}))}}),t.fn.sPage=function(t){return this.each(function(){new n(this,t)})}}(jQuery,window,document);
//# sourceMappingURL=../../sourcemaps/plugins/js/jquery.sPage.min.js.map
