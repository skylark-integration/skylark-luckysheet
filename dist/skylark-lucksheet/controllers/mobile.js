/**
 * skylark-lucksheet - A version of lucksheet.js that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["../global/location","./select","./menuButton","./freezen","../store"],function(e,o,l,t,c){"use strict";const{rowLocation:s,colLocation:n,mouseposition:r}=e,{selectHightlightShow:u}=o;return function(){c.cellMainSrollBarSize=0;let e=!1,o={},a=!1,i=null;$(document).on("touchstart","#luckysheet-grid-window-1",function(l){clearInterval(i),e=!0;let t=l.originalEvent.targetTouches[0];o={x:t.pageX,y:t.pageY,vy:0,moveType:"y"}}),$(document).on("touchmove","#luckysheet-grid-window-1",function(i){if(i.originalEvent.targetTouches.length>1||i.scale&&1!==i.scale)return;let h=i.originalEvent.targetTouches[0];if(e){let e=h.pageX-o.x,l=h.pageY-o.y;o.x=h.pageX,o.y=h.pageY;let t=$("#luckysheet-scrollbar-x").scrollLeft(),c=$("#luckysheet-scrollbar-y").scrollTop();c-=l,(t-=e)<0&&(t=0),c<0&&(c=0),$("#luckysheet-scrollbar-y").scrollTop(c),o.vy_y=l,o.scrollTop=c,$("#luckysheet-scrollbar-x").scrollLeft(t),o.vy_x=e,o.scrollLeft=t}else if(a){let e=r(h.pageX,h.pageY),o=e[0]+$("#luckysheet-cell-main").scrollLeft(),a=e[1]+$("#luckysheet-cell-main").scrollTop(),i=s(a),f=i[1],y=i[0],p=i[2],m=n(o),g=m[1],v=m[0],_=m[2],w=$.extend(!0,{},c.luckysheet_select_save[c.luckysheet_select_save.length-1]),d=0,k=0,T=[];w.top>y?(d=y,k=w.top+w.height-y,w.row[1]>w.row_focus&&(w.row[1]=w.row_focus),T=[p,w.row[1]]):w.top==y?(d=y,k=w.top+w.height-y,T=[p,w.row[0]]):(d=w.top,k=f-w.top-1,w.row[0]<w.row_focus&&(w.row[0]=w.row_focus),T=[w.row[0],p]);let L=0,x=0,b=[];w.left>v?(L=v,x=w.left+w.width-v,w.column[1]>w.column_focus&&(w.column[1]=w.column_focus),b=[_,w.column[1]]):w.left==v?(L=v,x=w.left+w.width-v,b=[_,w.column[0]]):(L=w.left,x=g-w.left-1,w.column[0]<w.column_focus&&(w.column[0]=w.column_focus),b=[w.column[0],_]);let M=l.mergeMoveMain(b,T,w,d,k,L,x);null!=M&&(b=M[0],T=M[1],d=M[2],k=M[3],L=M[4],x=M[5]),w.row=T,w.column=b,w.left_move=L,w.width_move=x,w.top_move=d,w.height_move=k,c.luckysheet_select_save[c.luckysheet_select_save.length-1]=w,u(),t.scrollFreezen()}i.stopPropagation()}),$(document).on("touchend",function(l){if(e){let e=Math.abs(o.vy_x),l=.25*(2*(e>>31)+1),t=Math.abs(o.vy_y),c=.25*(2*(t>>31)+1);(e>0||t>0)&&(i=setInterval(function(){t-=c,(e-=l)<=0&&(e=0),t<=0&&(t=0),o.vy_y>0?o.scrollTop-=t:o.scrollTop+=t,$("#luckysheet-scrollbar-y").scrollTop(o.scrollTop),o.vy_x>0?o.scrollLeft-=e:o.scrollLeft+=e,$("#luckysheet-scrollbar-x").scrollLeft(o.scrollLeft),e<=0&&t<=0&&clearInterval(i)},20))}e=!1,a=!1}),$(document).on("touchstart",".luckysheet-cs-touchhandle",function(o){a=!0,e=!1,o.stopPropagation()}),document.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1})}});
//# sourceMappingURL=../sourcemaps/controllers/mobile.js.map
