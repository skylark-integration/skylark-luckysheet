{"version":3,"sources":["widgets/createdom.js"],"names":["define","m_constant","luckysheetConfigsetting","m_getdata","rhchInit","m_util","Store","locale","gridHTML","menuToolBar","flow","columnHeaderHTML","maskHTML","colsmenuHTML","rightclickHTML","inputHTML","filtermenuHTML","filtersubmenuHTML","sheetconfigHTML","datagridgrowth","replaceHtml","colwidth","rowheight","data","menu","title","gh","logotitle","flowHTML","config","locale_info","info","addControll","add","row","addLast","backControll","backTop","pageInfo","total","totalPage","currentPage","pageControll","pageControll2","bottomControll","enableAddRow","enablePage","parseInt","enableAddBackTop","flowstr","height","rh_height","width","ch_width","colsheader","index","column","rowHeader","columnHeader","functionButton","$","container","append","columnHeaderHeight","cellMainSrollBarSize","menuid","rowHeaderWidth","css","val"],"mappings":";;;;;;;AAAAA,QACI,aACA,qCACA,qBACA,sBACA,gBACA,WACA,oBACD,SAAUC,EAAYC,EAAyBC,EAAYC,EAAUC,EAAQC,EAAOC,GACnF,aACA,MAAMC,SAACA,EAAQC,YAAEA,EAAWC,KAAEA,EAAIC,iBAAEA,EAAgBC,SAAEA,EAAQC,aAAEA,EAAYC,eAAEA,EAAcC,UAAEA,EAASC,eAAEA,EAAcC,kBAAEA,EAAiBC,gBAAEA,GAAmBjB,GACzJkB,eAACA,GAAkBhB,GACnBiB,YAACA,GAAef,EACtB,OAAO,SAA6BgB,EAAUC,EAAWC,EAAMC,EAAMC,GASjE,IAAIC,EAAKlB,IACTkB,EAAKN,EAAYM,GAAMC,UAAaF,IAEpCC,EAAKN,EAAYM,GAAMF,KAAQf,MAiB/B,IAAImB,EAAWlB,EACK,MAAhBJ,EAAMuB,SACNvB,EAAMuB,WAEVzB,EAASkB,EAAWD,GACpB,MACMS,EADUvB,IACYwB,KAC5B,IAAIC,EAAc,kEAAoEF,EAAYG,IAAM,4LAA8LH,EAAYI,IAAM,yDAA2DJ,EAAYK,QAAU,WACrYC,EAAe,+EAAiFN,EAAYO,QAAU,YAEtHC,EAAWlB,EAAYU,EAAYQ,UACnCC,MAAOrC,EAAwBqC,MAAQrC,EAAwBqC,MAAQ,GACvEC,UAAWtC,EAAwBoC,SAASE,UAAYtC,EAAwBoC,SAASE,UAAY,GACrGC,YAAavC,EAAwBoC,SAASG,YAAcvC,EAAwBoC,SAASG,YAAc,KAE3GC,EAAe,mFAAqFJ,EAAW,gGAC/GK,EAAgB,mFAAqFL,EAAW,UAChHM,EAAiB,GACjB1C,EAAwB2C,eACxBD,GAAkBZ,GAElB9B,EAAwB4C,aACoC,GAAxDC,SAAS7C,EAAwBoC,SAASE,WAC1CI,GAAkBD,EAElBC,GAAkBF,GAGtBxC,EAAwB8C,mBACxBJ,GAAkBR,GAEtB,IAAIa,EAAU7B,EAAY,8QAAgRwB,EAAiB,kBACvTM,OAAU5C,EAAM6C,UAChBC,MAAS9C,EAAM+C,SAAW,IAE1BC,EAAalC,EAAYT,GACzByC,MAAS9C,EAAM+C,SACfE,MAAS,EACTC,OAAU,KAEd5B,EAAWR,EAAYQ,GACnBwB,MAAS9C,EAAM+C,SACf3C,KAAQuC,EACRM,MAAS,IAEb7B,EAAKN,EAAYM,GACbhB,KAAQkB,EACR6B,UAAa,sBAAwBnD,EAAM6C,UAAY,sEACvDO,aAAgBJ,EAChBK,eAAkBzD,EAAwByD,iBAG9CC,EAAE,IAAMtD,EAAMuD,WAAWC,OAAOpC,GAChCkC,EAAE,+BAA+BR,MAAM9C,EAAM+C,UAC7CO,EAAE,+BAA+BV,OAAO5C,EAAM6C,UAAY7C,EAAMyD,mBAAqBzD,EAAM0D,qBAAuB,GAElHJ,EAAE,QAAQE,OAAOlD,GACjBgD,EAAE,QAAQE,OAAOjD,GACjB+C,EAAE,QAAQE,OAAOhD,KACjB8C,EAAE,QAAQE,OAAO/C,GACjB6C,EAAE,QAAQE,OAAO1C,EAAYJ,KAAoBiD,OAAU,YAC3DL,EAAE,QAAQE,OAAO1C,EAAYH,KAAuBgD,OAAU,YAC9DL,EAAE,QAAQE,OAAO5C,KACjB0C,EAAE,sBAAsBR,MAAM9C,EAAM4D,eAAiB,KACrDN,EAAE,wBAAwBV,OAAO5C,EAAMyD,mBAAqB,KAC5DH,EAAE,wBAAwBO,KACtBf,MAAO9C,EAAM4D,eAAiB,IAC9BhB,OAAQ5C,EAAMyD,mBAAqB,MAIvCH,EAAE,iCAAiCQ,IAAIlE,EAAwBuB","file":"../../widgets/createdom.js","sourcesContent":["define([\n    './constant',\n    '../methods/luckysheetConfigsetting',\n    '../methods/getdata',\n    '../methods/rhchInit',\n    '../utils/util',\n    '../store',\n    '../locale/locale'\n], function (m_constant, luckysheetConfigsetting, m_getdata,  rhchInit, m_util, Store, locale) {\n    'use strict';\n    const {gridHTML, menuToolBar, flow, columnHeaderHTML, maskHTML, colsmenuHTML, rightclickHTML, inputHTML, filtermenuHTML, filtersubmenuHTML, sheetconfigHTML} = m_constant;\n    const {datagridgrowth} = m_getdata;\n    const {replaceHtml} = m_util;\n    return function luckysheetcreatedom(colwidth, rowheight, data, menu, title) {\n        // //最少30行\n        // if(rowheight < 30){\n        //     rowheight = 30;\n        // }\n        // //最少22列\n        // if(colwidth < 22){\n        //     colwidth = 22;\n        // }\n        let gh = gridHTML();\n        gh = replaceHtml(gh, { 'logotitle': title });    //设置title\n        //设置title\n        gh = replaceHtml(gh, { 'menu': menuToolBar() });   \n        //设置需要显示的菜单\n        // if (data.length == 0) {\n        //     Store.flowdata = datagridgrowth(data, rowheight, colwidth);\n        // }\n        // else if (data.length < rowheight && data[0].length < colwidth) {\n        //     Store.flowdata = datagridgrowth(data, rowheight - data.length, colwidth - data[0].length);\n        // }\n        // else if (data.length < rowheight) {\n        //     Store.flowdata = datagridgrowth(data, rowheight - data.length, 0);\n        // }\n        // else if (data[0].length < colwidth) {\n        //     Store.flowdata = datagridgrowth(data, 0, colwidth - data[0].length);\n        // }\n        // else {\n        //     Store.flowdata = data;\n        // }\n        let flowHTML = flow;\n        if (Store.config == null) {\n            Store.config = {};\n        }\n        rhchInit(rowheight, colwidth);\n        const _locale = locale();\n        const locale_info = _locale.info;\n        let addControll = '<button id=\"luckysheet-bottom-add-row\" class=\"btn btn-default\">' + locale_info.add + '</button><input id=\"luckysheet-bottom-add-row-input\" type=\"text\" class=\"luckysheet-datavisual-config-input luckysheet-mousedown-cancel\" placeholder=\"100\"><span style=\"font-size: 14px;\">' + locale_info.row + '</span><span style=\"font-size: 14px;color: #9c9c9c;\">(' + locale_info.addLast + ')</span>';\n        let backControll = ' <button id=\"luckysheet-bottom-bottom-top\" class=\"btn btn-default\" style=\"\">' + locale_info.backTop + '</button>';    // let pageControll = ' <span id=\"luckysheet-bottom-page-info\" style=\"font-size: 14px;color: #f34141;\">共'+ luckysheetConfigsetting.pageInfo.totalPage +'页，当前已显示'+ (luckysheetConfigsetting.pageInfo.currentPage) +'页，每页'+ luckysheetConfigsetting.pageInfo.pageSize +'条</span> <button id=\"luckysheet-bottom-page-next\" class=\"btn btn-danger\" style=\"\">下一页</button>';\n        // let pageControll = ' <span id=\"luckysheet-bottom-page-info\" style=\"font-size: 14px;color: #f34141;\">共'+ luckysheetConfigsetting.pageInfo.totalPage +'页，当前已显示'+ (luckysheetConfigsetting.pageInfo.currentPage) +'页，每页'+ luckysheetConfigsetting.pageInfo.pageSize +'条</span> <button id=\"luckysheet-bottom-page-next\" class=\"btn btn-danger\" style=\"\">下一页</button>';\n        let pageInfo = replaceHtml(locale_info.pageInfo, {\n            total: luckysheetConfigsetting.total ? luckysheetConfigsetting.total : '',\n            totalPage: luckysheetConfigsetting.pageInfo.totalPage ? luckysheetConfigsetting.pageInfo.totalPage : '',\n            currentPage: luckysheetConfigsetting.pageInfo.currentPage ? luckysheetConfigsetting.pageInfo.currentPage : ''\n        });\n        let pageControll = ' <span id=\"luckysheet-bottom-page-info\" style=\"font-size: 14px;color: #f34141;\">' + pageInfo + '</span> <button id=\"luckysheet-bottom-page-next\" class=\"btn btn-danger\" style=\"\">下一页</button>';\n        let pageControll2 = ' <span id=\"luckysheet-bottom-page-info\" style=\"font-size: 14px;color: #f34141;\">' + pageInfo + '</span>';\n        let bottomControll = '';\n        if (luckysheetConfigsetting.enableAddRow) {\n            bottomControll += addControll;\n        }\n        if (luckysheetConfigsetting.enablePage) {\n            if (parseInt(luckysheetConfigsetting.pageInfo.totalPage) == 1) {\n                bottomControll += pageControll2;\n            } else {\n                bottomControll += pageControll;\n            }\n        }\n        if (luckysheetConfigsetting.enableAddBackTop) {\n            bottomControll += backControll;\n        }\n        let flowstr = replaceHtml('<div id=\"luckysheetcoltable_0\" class=\"luckysheet-cell-flow-col\"> <div id =\"luckysheet-sheettable_0\" class=\"luckysheet-cell-sheettable\" style=\"height:${height}px;width:${width}px;\"></div><div id=\"luckysheet-bottom-controll-row\" class=\"luckysheet-bottom-controll-row\"> ' + bottomControll + ' </div> </div>', {\n            'height': Store.rh_height,\n            'width': Store.ch_width - 1\n        });\n        let colsheader = replaceHtml(columnHeaderHTML, {\n            'width': Store.ch_width,\n            'index': 0,\n            'column': ''\n        });\n        flowHTML = replaceHtml(flowHTML, {\n            'width': Store.ch_width,\n            'flow': flowstr,\n            'index': 0\n        });\n        gh = replaceHtml(gh, {\n            'flow': flowHTML,\n            'rowHeader': \"<div style='height:\" + Store.rh_height + \"px' id='luckysheetrowHeader_0' class='luckysheetsheetchange'></div>\",\n            'columnHeader': colsheader,\n            'functionButton': luckysheetConfigsetting.functionButton\n        });\n        //设置需要显示的菜单\n        $('#' + Store.container).append(gh);\n        $('#luckysheet-scrollbar-x div').width(Store.ch_width);\n        $('#luckysheet-scrollbar-y div').height(Store.rh_height + Store.columnHeaderHeight - Store.cellMainSrollBarSize - 3);    //新建行菜单\n        //新建行菜单\n        $('body').append(maskHTML);\n        $('body').append(colsmenuHTML);\n        $('body').append(rightclickHTML());\n        $('body').append(inputHTML);\n        $('body').append(replaceHtml(filtermenuHTML(), { 'menuid': 'filter' }));\n        $('body').append(replaceHtml(filtersubmenuHTML(), { 'menuid': 'filter' }));\n        $('body').append(sheetconfigHTML());\n        $('#luckysheet-rows-h').width(Store.rowHeaderWidth - 1.5);\n        $('#luckysheet-cols-h-c').height(Store.columnHeaderHeight - 1.5);\n        $('#luckysheet-left-top').css({\n            width: Store.rowHeaderWidth - 1.5,\n            height: Store.columnHeaderHeight - 1.5\n        });\n        // //批注\n        // luckysheetPostil.buildAllPs(Store.flowdata);\n        $('#luckysheet_info_detail_input').val(luckysheetConfigsetting.title);\n    };\n});"]}