{"version":3,"sources":["methods/sort_methods.js"],"names":["define","m_util","m_validate","m_datecontroll","luckysheetConfigsetting","Store","numeral","getObjType","isRealNull","isRealNum","isdatetime","diff","isEditMode","orderbydata","data","index","isAsc","a","x","y","x1","y1","v","value","localeCompare","d","sort","orderbydata1D"],"mappings":";;;;;;;AAAAA,QACI,gBACA,sBACA,0BACA,qCACA,WACA,sBACD,SAAUC,EAAQC,EAAYC,EAAiBC,EAAwBC,EAAOC,GAC7E,aACA,MAAMC,WAACA,GAAcN,GACfO,WAACA,EAAUC,UAAEA,GAAaP,GAG1BQ,WAACA,EAAUC,KAAEA,GAAQR,EAFRC,EAAwBQ,WAkI3C,OACIC,YA/HJ,SAAqBC,EAAMC,EAAOC,GACjB,MAATA,IACAA,GAAQ,GAEZ,IAAIC,EAAI,SAAUC,EAAGC,GACjB,IAAIC,EAAKF,EAAEH,GAAQM,EAAKF,EAAEJ,GAO1B,MAN4B,UAAxBR,EAAWW,EAAEH,MACbK,EAAKF,EAAEH,GAAOO,GAEU,UAAxBf,EAAWY,EAAEJ,MACbM,EAAKF,EAAEJ,GAAOO,GAEdd,EAAWY,GACJ,EAEPZ,EAAWa,IACH,EAERX,EAAWU,IAAOV,EAAWW,GACtBV,EAAKS,EAAIC,GACTZ,EAAUW,IAAOX,EAAUY,GAC3Bf,EAAQc,GAAIG,QAAUjB,EAAQe,GAAIE,QACjCd,EAAUW,IAAQX,EAAUY,GAE5BZ,EAAUW,GAEVX,EAAUY,QAAf,GACK,EAFD,EAFAD,EAAGI,cAAcH,EAAI,OAOhCI,EAAI,SAAUP,EAAGC,GACjB,IAAIC,EAAKF,EAAEH,GAAQM,EAAKF,EAAEJ,GAO1B,MAN4B,UAAxBR,EAAWW,EAAEH,MACbK,EAAKF,EAAEH,GAAOO,GAEU,UAAxBf,EAAWY,EAAEJ,MACbM,EAAKF,EAAEJ,GAAOO,GAEdd,EAAWY,GACJ,EAEPZ,EAAWa,IACH,EAERX,EAAWU,IAAOV,EAAWW,GACtBV,EAAKU,EAAID,GACTX,EAAUW,IAAOX,EAAUY,GAC3Bf,EAAQe,GAAIE,QAAUjB,EAAQc,GAAIG,QACjCd,EAAUW,IAAQX,EAAUY,GAE5BZ,EAAUW,GAEVX,EAAUY,QAAf,EACI,GAFC,EAFDA,EAAGG,cAAcJ,EAAI,OAOpC,OAAIJ,EACOF,EAAKY,KAAKT,GAEVH,EAAKY,KAAKD,IAqErBE,cAlEJ,SAAuBb,EAAME,GACZ,MAATA,IACAA,GAAQ,GAEZ,IAAIC,EAAI,SAAUC,EAAGC,GACjB,IAAIC,EAAKF,EAAGG,EAAKF,EAajB,MAZqB,UAAjBZ,EAAWW,KACXE,EAAKF,EAAEI,GAEU,UAAjBf,EAAWY,KACXE,EAAKF,EAAEG,GAED,MAANF,IACAA,EAAK,IAEC,MAANC,IACAA,EAAK,IAELX,EAAWU,IAAOV,EAAWW,GACtBV,EAAKS,EAAIC,GACTZ,EAAUW,IAAOX,EAAUY,GAC3Bf,EAAQc,GAAIG,QAAUjB,EAAQe,GAAIE,QACjCd,EAAUW,IAAQX,EAAUY,GAE5BZ,EAAUW,GAEVX,EAAUY,QAAf,GACK,EAFD,EAFAD,EAAGI,cAAcH,EAAI,OAOhCI,EAAI,SAAUP,EAAGC,GACjB,IAAIC,EAAKF,EAAGG,EAAKF,EAajB,MAZqB,UAAjBZ,EAAWW,KACXE,EAAKF,EAAEI,GAEU,UAAjBf,EAAWY,KACXE,EAAKF,EAAEG,GAED,MAANF,IACAA,EAAK,IAEC,MAANC,IACAA,EAAK,IAELX,EAAWU,IAAOV,EAAWW,GACtBV,EAAKU,EAAID,GACTX,EAAUW,IAAOX,EAAUY,GAC3Bf,EAAQe,GAAIE,QAAUjB,EAAQc,GAAIG,QACjCd,EAAUW,IAAQX,EAAUY,GAE5BZ,EAAUW,GAEVX,EAAUY,QAAf,EACI,GAFC,EAFDA,EAAGG,cAAcJ,EAAI,OAOpC,OAAIJ,EACOF,EAAKY,KAAKT,GAEVH,EAAKY,KAAKD","file":"../../methods/sort_methods.js","sourcesContent":["define([\r\n    '../utils/util',\r\n    '../methods/validate',\r\n    '../methods/datecontroll',\r\n    '../methods/luckysheetConfigsetting',    \r\n    '../store',\r\n    '../vendors/numeral'\r\n], function (m_util, m_validate, m_datecontroll,  luckysheetConfigsetting,Store, numeral) {\r\n    'use strict';\r\n    const {getObjType} = m_util;\r\n    const {isRealNull, isRealNum} = m_validate;\r\n    const isEditMode = luckysheetConfigsetting.isEditMode;\r\n\r\n    const {isdatetime, diff} = m_datecontroll;\r\n    //数据排序方法\r\n    function orderbydata(data, index, isAsc) {\r\n        if (isAsc == null) {\r\n            isAsc = true;\r\n        }\r\n        let a = function (x, y) {\r\n            let x1 = x[index], y1 = y[index];\r\n            if (getObjType(x[index]) == 'object') {\r\n                x1 = x[index].v;\r\n            }\r\n            if (getObjType(y[index]) == 'object') {\r\n                y1 = y[index].v;\r\n            }\r\n            if (isRealNull(x1)) {\r\n                return 1;\r\n            }\r\n            if (isRealNull(y1)) {\r\n                return -1;\r\n            }\r\n            if (isdatetime(x1) && isdatetime(y1)) {\r\n                return diff(x1, y1);\r\n            } else if (isRealNum(x1) && isRealNum(y1)) {\r\n                return numeral(x1).value() - numeral(y1).value();\r\n            } else if (!isRealNum(x1) && !isRealNum(y1)) {\r\n                return x1.localeCompare(y1, 'zh');\r\n            } else if (!isRealNum(x1)) {\r\n                return 1;\r\n            } else if (!isRealNum(y1)) {\r\n                return -1;\r\n            }\r\n        };\r\n        let d = function (x, y) {\r\n            let x1 = x[index], y1 = y[index];\r\n            if (getObjType(x[index]) == 'object') {\r\n                x1 = x[index].v;\r\n            }\r\n            if (getObjType(y[index]) == 'object') {\r\n                y1 = y[index].v;\r\n            }\r\n            if (isRealNull(x1)) {\r\n                return 1;\r\n            }\r\n            if (isRealNull(y1)) {\r\n                return -1;\r\n            }\r\n            if (isdatetime(x1) && isdatetime(y1)) {\r\n                return diff(y1, x1);\r\n            } else if (isRealNum(x1) && isRealNum(y1)) {\r\n                return numeral(y1).value() - numeral(x1).value();\r\n            } else if (!isRealNum(x1) && !isRealNum(y1)) {\r\n                return y1.localeCompare(x1, 'zh');\r\n            } else if (!isRealNum(x1)) {\r\n                return -1;\r\n            } else if (!isRealNum(y1)) {\r\n                return 1;\r\n            }\r\n        };\r\n        if (isAsc) {\r\n            return data.sort(a);\r\n        } else {\r\n            return data.sort(d);\r\n        }\r\n    }\r\n    function orderbydata1D(data, isAsc) {\r\n        if (isAsc == null) {\r\n            isAsc = true;\r\n        }\r\n        let a = function (x, y) {\r\n            let x1 = x, y1 = y;\r\n            if (getObjType(x) == 'object') {\r\n                x1 = x.v;\r\n            }\r\n            if (getObjType(y) == 'object') {\r\n                y1 = y.v;\r\n            }\r\n            if (x1 == null) {\r\n                x1 = '';\r\n            }\r\n            if (y1 == null) {\r\n                y1 = '';\r\n            }\r\n            if (isdatetime(x1) && isdatetime(y1)) {\r\n                return diff(x1, y1);\r\n            } else if (isRealNum(x1) && isRealNum(y1)) {\r\n                return numeral(x1).value() - numeral(y1).value();\r\n            } else if (!isRealNum(x1) && !isRealNum(y1)) {\r\n                return x1.localeCompare(y1, 'zh');\r\n            } else if (!isRealNum(x1)) {\r\n                return 1;\r\n            } else if (!isRealNum(y1)) {\r\n                return -1;\r\n            }\r\n        };\r\n        let d = function (x, y) {\r\n            let x1 = x, y1 = y;\r\n            if (getObjType(x) == 'object') {\r\n                x1 = x.v;\r\n            }\r\n            if (getObjType(y) == 'object') {\r\n                y1 = y.v;\r\n            }\r\n            if (x1 == null) {\r\n                x1 = '';\r\n            }\r\n            if (y1 == null) {\r\n                y1 = '';\r\n            }\r\n            if (isdatetime(x1) && isdatetime(y1)) {\r\n                return diff(y1, x1);\r\n            } else if (isRealNum(x1) && isRealNum(y1)) {\r\n                return numeral(y1).value() - numeral(x1).value();\r\n            } else if (!isRealNum(x1) && !isRealNum(y1)) {\r\n                return y1.localeCompare(x1, 'zh');\r\n            } else if (!isRealNum(x1)) {\r\n                return -1;\r\n            } else if (!isRealNum(y1)) {\r\n                return 1;\r\n            }\r\n        };\r\n        if (isAsc) {\r\n            return data.sort(a);\r\n        } else {\r\n            return data.sort(d);\r\n        }\r\n    } \r\n  //排序一列数据\r\n\r\n    return {\r\n        orderbydata,\r\n        orderbydata1D\r\n    };\r\n});"]}