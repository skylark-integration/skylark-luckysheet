{"version":3,"sources":["methods/rhchInit.js"],"names":["define","Store","luckysheetConfigsetting","zoomSetting","rowHeaderWidth","zoomRatio","columnHeaderHeight","$","width","height","css","rhchInit","rowheight","colwidth","visibledatarow","rh_height","r","rowlen","defaultrowlen","config","Math","round","push","enableAddRow","enableAddBackTop","visibledatacolumn","ch_width","maxColumnlen","c","firstcolumnlen","defaultcollen","flowdata"],"mappings":";;;;;;;AAAAA,QACI,WACA,6BACD,SAAUC,EAAOC,GAChB,aACA,SAASC,IAELF,EAAMG,eAAiBF,EAAwBE,eAAiBH,EAAMI,UACtEJ,EAAMK,mBAAqBJ,EAAwBI,mBAAqBL,EAAMI,UAC9EE,EAAE,sBAAsBC,MAAMP,EAAMG,eAAiB,KACrDG,EAAE,wBAAwBE,OAAOR,EAAMK,mBAAqB,KAC5DC,EAAE,wBAAwBG,KACtBF,MAAOP,EAAMG,eAAiB,IAC9BK,OAAQR,EAAMK,mBAAqB,MAG3C,SAASK,EAASC,EAAWC,GAKzB,GAJAV,IAIiB,MAAbS,EAAmB,CACnBX,EAAMa,kBACNb,EAAMc,UAAY,EAClB,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAWI,IAAK,CAChC,IAAIC,EAAShB,EAAMiB,cACW,MAA1BjB,EAAMkB,OAAe,QAA0C,MAA7BlB,EAAMkB,OAAe,OAAEH,KACzDC,EAAShB,EAAMkB,OAAe,OAAEH,IAEH,MAA7Bf,EAAMkB,OAAkB,WAA6C,MAAhClB,EAAMkB,OAAkB,UAAEH,IAInEf,EAAMc,WAAaK,KAAKC,OAAOJ,EAAS,GAAKhB,EAAMI,WACnDJ,EAAMa,eAAeQ,KAAKrB,EAAMc,YAJ5Bd,EAAMa,eAAeQ,KAAKrB,EAAMc,WAQnCb,EAAwBqB,cAAiBrB,EAAwBsB,iBAGlEvB,EAAMc,WAAa,GAFnBd,EAAMc,WAAa,GAO3B,GAAgB,MAAZF,EAAkB,CAClBZ,EAAMwB,qBACNxB,EAAMyB,SAAW,EACjB,IAAIC,EAAe,IACnB,IAAK,IAAIC,EAAI,EAAGA,EAAIf,EAAUe,IAAK,CAC/B,IAAIC,EAAiB5B,EAAM6B,cACM,MAA7B7B,EAAMkB,OAAkB,WAA6C,MAAhClB,EAAMkB,OAAkB,UAAES,GAC/DC,EAAiB5B,EAAMkB,OAAkB,UAAES,GAElB,MAArB3B,EAAM8B,SAAS,IAAsC,MAAxB9B,EAAM8B,SAAS,GAAGH,KAC3CC,EAAiB,IACjBA,EAAiB,IACVA,EAAiB5B,EAAM6B,gBAC9BD,EAAiB5B,EAAM6B,eAEvBD,GAAkB5B,EAAM6B,gBACS,MAA7B7B,EAAMkB,OAAkB,YACxBlB,EAAMkB,OAAkB,cAE5BlB,EAAMkB,OAAkB,UAAES,GAAKC,IAIV,MAA7B5B,EAAMkB,OAAkB,WAA6C,MAAhClB,EAAMkB,OAAkB,UAAES,IAInE3B,EAAMyB,UAAYN,KAAKC,OAAOQ,EAAiB,GAAK5B,EAAMI,WAC1DJ,EAAMwB,kBAAkBH,KAAKrB,EAAMyB,WAJ/BzB,EAAMwB,kBAAkBH,KAAKrB,EAAMyB,UAc3CzB,EAAMyB,UAAYC,GAK1B,OAFAhB,EAASR,YAAeA,EAEjBQ","file":"../../methods/rhchInit.js","sourcesContent":["define([\n    '../store',\n    './luckysheetConfigsetting'\n], function (Store, luckysheetConfigsetting) {\n    'use strict';\n    function zoomSetting() {\n        //zoom\n        Store.rowHeaderWidth = luckysheetConfigsetting.rowHeaderWidth * Store.zoomRatio;\n        Store.columnHeaderHeight = luckysheetConfigsetting.columnHeaderHeight * Store.zoomRatio;\n        $('#luckysheet-rows-h').width(Store.rowHeaderWidth - 1.5);\n        $('#luckysheet-cols-h-c').height(Store.columnHeaderHeight - 1.5);\n        $('#luckysheet-left-top').css({\n            width: Store.rowHeaderWidth - 1.5,\n            height: Store.columnHeaderHeight - 1.5\n        });\n    }\n    function rhchInit(rowheight, colwidth) {\n        zoomSetting();    //Zoom sheet on first load\n                          //行高\n        //Zoom sheet on first load\n        //行高\n        if (rowheight != null) {\n            Store.visibledatarow = [];\n            Store.rh_height = 0;\n            for (let r = 0; r < rowheight; r++) {\n                let rowlen = Store.defaultrowlen;\n                if (Store.config['rowlen'] != null && Store.config['rowlen'][r] != null) {\n                    rowlen = Store.config['rowlen'][r];\n                }\n                if (Store.config['rowhidden'] != null && Store.config['rowhidden'][r] != null) {\n                    Store.visibledatarow.push(Store.rh_height);\n                    continue;\n                }\n                Store.rh_height += Math.round((rowlen + 1) * Store.zoomRatio);\n                Store.visibledatarow.push(Store.rh_height);    //行的临时长度分布\n            }    // 如果增加行和回到顶部按钮隐藏，则减少底部空白区域，但是预留足够空间给单元格下拉按钮\n            //行的临时长度分布\n            // 如果增加行和回到顶部按钮隐藏，则减少底部空白区域，但是预留足够空间给单元格下拉按钮\n            if (!luckysheetConfigsetting.enableAddRow && !luckysheetConfigsetting.enableAddBackTop) {\n                Store.rh_height += 29;\n            } else {\n                Store.rh_height += 80;    //最底部增加空白\n            }\n        }    //列宽\n        //最底部增加空白\n        //列宽\n        if (colwidth != null) {\n            Store.visibledatacolumn = [];\n            Store.ch_width = 0;\n            let maxColumnlen = 120;\n            for (let c = 0; c < colwidth; c++) {\n                let firstcolumnlen = Store.defaultcollen;\n                if (Store.config['columnlen'] != null && Store.config['columnlen'][c] != null) {\n                    firstcolumnlen = Store.config['columnlen'][c];\n                } else {\n                    if (Store.flowdata[0] != null && Store.flowdata[0][c] != null) {\n                        if (firstcolumnlen > 300) {\n                            firstcolumnlen = 300;\n                        } else if (firstcolumnlen < Store.defaultcollen) {\n                            firstcolumnlen = Store.defaultcollen;\n                        }\n                        if (firstcolumnlen != Store.defaultcollen) {\n                            if (Store.config['columnlen'] == null) {\n                                Store.config['columnlen'] = {};\n                            }\n                            Store.config['columnlen'][c] = firstcolumnlen;\n                        }\n                    }\n                }\n                if (Store.config['colhidden'] != null && Store.config['colhidden'][c] != null) {\n                    Store.visibledatacolumn.push(Store.ch_width);\n                    continue;\n                }\n                Store.ch_width += Math.round((firstcolumnlen + 1) * Store.zoomRatio);\n                Store.visibledatacolumn.push(Store.ch_width);    //列的临时长度分布\n                                                                 // if(maxColumnlen < firstcolumnlen + 1){\n                                                                 //     maxColumnlen = firstcolumnlen + 1;\n                                                                 // }\n            }    // Store.ch_width += 120;\n            //列的临时长度分布\n            // if(maxColumnlen < firstcolumnlen + 1){\n            //     maxColumnlen = firstcolumnlen + 1;\n            // }\n            // Store.ch_width += 120;\n            Store.ch_width += maxColumnlen;\n        }\n    };\n    rhchInit.zoomSetting =  zoomSetting;\n\n    return rhchInit;\n});"]}