{"version":3,"sources":["global/rhchInit.js"],"names":["define","Store","luckysheetConfigsetting","rhchInit","rowheight","colwidth","zoomSetting","visibledatarow","rh_height","r","rowlen","defaultrowlen","config","Math","round","zoomRatio","push","enableAddRow","enableAddBackTop","visibledatacolumn","ch_width","maxColumnlen","c","firstcolumnlen","defaultcollen","flowdata","rowHeaderWidth","columnHeaderHeight","$","width","height","css"],"mappings":";;;;;;;AAAAA,QACI,WACA,0CACD,SAAUC,EAAOC,GAChB,aACA,SAASC,EAASC,EAAWC,GAKzB,GAJAC,cAIiB,MAAbF,EAAmB,CACnBH,EAAMM,kBACNN,EAAMO,UAAY,EAClB,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAWK,IAAK,CAChC,IAAIC,EAAST,EAAMU,cACW,MAA1BV,EAAMW,OAAe,QAA0C,MAA7BX,EAAMW,OAAe,OAAEH,KACzDC,EAAST,EAAMW,OAAe,OAAEH,IAEH,MAA7BR,EAAMW,OAAkB,WAA6C,MAAhCX,EAAMW,OAAkB,UAAEH,IAInER,EAAMO,WAAaK,KAAKC,OAAOJ,EAAS,GAAKT,EAAMc,WACnDd,EAAMM,eAAeS,KAAKf,EAAMO,YAJ5BP,EAAMM,eAAeS,KAAKf,EAAMO,WAQnCN,EAAwBe,cAAiBf,EAAwBgB,iBAGlEjB,EAAMO,WAAa,GAFnBP,EAAMO,WAAa,GAO3B,GAAgB,MAAZH,EAAkB,CAClBJ,EAAMkB,qBACNlB,EAAMmB,SAAW,EACjB,IAAIC,EAAe,IACnB,IAAK,IAAIC,EAAI,EAAGA,EAAIjB,EAAUiB,IAAK,CAC/B,IAAIC,EAAiBtB,EAAMuB,cACM,MAA7BvB,EAAMW,OAAkB,WAA6C,MAAhCX,EAAMW,OAAkB,UAAEU,GAC/DC,EAAiBtB,EAAMW,OAAkB,UAAEU,GAElB,MAArBrB,EAAMwB,SAAS,IAAsC,MAAxBxB,EAAMwB,SAAS,GAAGH,KAC3CC,EAAiB,IACjBA,EAAiB,IACVA,EAAiBtB,EAAMuB,gBAC9BD,EAAiBtB,EAAMuB,eAEvBD,GAAkBtB,EAAMuB,gBACS,MAA7BvB,EAAMW,OAAkB,YACxBX,EAAMW,OAAkB,cAE5BX,EAAMW,OAAkB,UAAEU,GAAKC,IAIV,MAA7BtB,EAAMW,OAAkB,WAA6C,MAAhCX,EAAMW,OAAkB,UAAEU,IAInErB,EAAMmB,UAAYP,KAAKC,OAAOS,EAAiB,GAAKtB,EAAMc,WAC1Dd,EAAMkB,kBAAkBH,KAAKf,EAAMmB,WAJ/BnB,EAAMkB,kBAAkBH,KAAKf,EAAMmB,UAc3CnB,EAAMmB,UAAYC,GAe1B,OAZAlB,EAASG,YAAe,WAEpBL,EAAMyB,eAAiBxB,EAAwBwB,eAAiBzB,EAAMc,UACtEd,EAAM0B,mBAAqBzB,EAAwByB,mBAAqB1B,EAAMc,UAC9Ea,EAAE,sBAAsBC,MAAM5B,EAAMyB,eAAiB,KACrDE,EAAE,wBAAwBE,OAAO7B,EAAM0B,mBAAqB,KAC5DC,EAAE,wBAAwBG,KACtBF,MAAO5B,EAAMyB,eAAiB,IAC9BI,OAAQ7B,EAAM0B,mBAAqB,OAIpCxB","file":"../../global/rhchInit.js","sourcesContent":["define([\n    '../store',\n    '../controllers/luckysheetConfigsetting'\n], function (Store, luckysheetConfigsetting) {\n    'use strict';\n    function rhchInit(rowheight, colwidth) {\n        zoomSetting();    //Zoom sheet on first load\n                          //行高\n        //Zoom sheet on first load\n        //行高\n        if (rowheight != null) {\n            Store.visibledatarow = [];\n            Store.rh_height = 0;\n            for (let r = 0; r < rowheight; r++) {\n                let rowlen = Store.defaultrowlen;\n                if (Store.config['rowlen'] != null && Store.config['rowlen'][r] != null) {\n                    rowlen = Store.config['rowlen'][r];\n                }\n                if (Store.config['rowhidden'] != null && Store.config['rowhidden'][r] != null) {\n                    Store.visibledatarow.push(Store.rh_height);\n                    continue;\n                }\n                Store.rh_height += Math.round((rowlen + 1) * Store.zoomRatio);\n                Store.visibledatarow.push(Store.rh_height);    //行的临时长度分布\n            }    // 如果增加行和回到顶部按钮隐藏，则减少底部空白区域，但是预留足够空间给单元格下拉按钮\n            //行的临时长度分布\n            // 如果增加行和回到顶部按钮隐藏，则减少底部空白区域，但是预留足够空间给单元格下拉按钮\n            if (!luckysheetConfigsetting.enableAddRow && !luckysheetConfigsetting.enableAddBackTop) {\n                Store.rh_height += 29;\n            } else {\n                Store.rh_height += 80;    //最底部增加空白\n            }\n        }    //列宽\n        //最底部增加空白\n        //列宽\n        if (colwidth != null) {\n            Store.visibledatacolumn = [];\n            Store.ch_width = 0;\n            let maxColumnlen = 120;\n            for (let c = 0; c < colwidth; c++) {\n                let firstcolumnlen = Store.defaultcollen;\n                if (Store.config['columnlen'] != null && Store.config['columnlen'][c] != null) {\n                    firstcolumnlen = Store.config['columnlen'][c];\n                } else {\n                    if (Store.flowdata[0] != null && Store.flowdata[0][c] != null) {\n                        if (firstcolumnlen > 300) {\n                            firstcolumnlen = 300;\n                        } else if (firstcolumnlen < Store.defaultcollen) {\n                            firstcolumnlen = Store.defaultcollen;\n                        }\n                        if (firstcolumnlen != Store.defaultcollen) {\n                            if (Store.config['columnlen'] == null) {\n                                Store.config['columnlen'] = {};\n                            }\n                            Store.config['columnlen'][c] = firstcolumnlen;\n                        }\n                    }\n                }\n                if (Store.config['colhidden'] != null && Store.config['colhidden'][c] != null) {\n                    Store.visibledatacolumn.push(Store.ch_width);\n                    continue;\n                }\n                Store.ch_width += Math.round((firstcolumnlen + 1) * Store.zoomRatio);\n                Store.visibledatacolumn.push(Store.ch_width);    //列的临时长度分布\n                                                                 // if(maxColumnlen < firstcolumnlen + 1){\n                                                                 //     maxColumnlen = firstcolumnlen + 1;\n                                                                 // }\n            }    // Store.ch_width += 120;\n            //列的临时长度分布\n            // if(maxColumnlen < firstcolumnlen + 1){\n            //     maxColumnlen = firstcolumnlen + 1;\n            // }\n            // Store.ch_width += 120;\n            Store.ch_width += maxColumnlen;\n        }\n    };\n    rhchInit.zoomSetting =  function zoomSetting() {\n        //zoom\n        Store.rowHeaderWidth = luckysheetConfigsetting.rowHeaderWidth * Store.zoomRatio;\n        Store.columnHeaderHeight = luckysheetConfigsetting.columnHeaderHeight * Store.zoomRatio;\n        $('#luckysheet-rows-h').width(Store.rowHeaderWidth - 1.5);\n        $('#luckysheet-cols-h-c').height(Store.columnHeaderHeight - 1.5);\n        $('#luckysheet-left-top').css({\n            width: Store.rowHeaderWidth - 1.5,\n            height: Store.columnHeaderHeight - 1.5\n        });\n    }\n\n    return rhchInit;\n});"]}