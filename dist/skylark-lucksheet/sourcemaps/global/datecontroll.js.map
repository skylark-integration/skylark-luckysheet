{"version":3,"sources":["global/datecontroll.js"],"names":["define","m_validate","dayjs","hasChinaword","isdatetime","s","toString","length","str","test","year","RegExp","$1","month","$2","day","$3","Date","getDate","checkDateTime","diff","now","then","isdatatypemulti","type","isNaN","parseFloat","isdatatype"],"mappings":";;;;;;;AAAAA,QACI,aACA,kBACD,SAAUC,EAAYC,GACrB,aACA,MAAMC,aAACA,GAAgBF,EACvB,SAASG,EAAWC,GAChB,QAAS,MAALA,GAAaA,EAAEC,WAAWC,OAAS,MAOvC,SAAuBC,GAGnB,IAFW,qEAEDC,KAAKD,KADJ,uEACkBC,KAAKD,GAC9B,OAAO,EAEX,IAAIE,EAAOC,OAAOC,GAAIC,EAAQF,OAAOG,GAAIC,EAAMJ,OAAOK,GACtD,GAAIN,EAAO,KACP,OAAO,EAEX,GAAIG,EAAQ,GACR,OAAO,EAEX,GAAIE,EAAM,GACN,OAAO,EAEX,GAAa,GAATF,EAAY,CACZ,GAAuC,IAAnC,IAAII,KAAKP,EAAM,EAAG,IAAIQ,WAAmBH,EAAM,GAC/C,OAAO,EACJ,GAAuC,IAAnC,IAAIE,KAAKP,EAAM,EAAG,IAAIQ,WAAmBH,EAAM,GACtD,OAAO,EAGf,OAAO,EA5BAI,CAAcd,GAqD7B,OACID,WAAAA,EACAgB,KAxBJ,SAAcC,EAAKC,GACf,OAAOpB,EAAMmB,GAAKD,KAAKlB,EAAMoB,KAwB7BC,gBAtBJ,SAAyBlB,GACrB,IAAImB,KAOJ,OANIpB,EAAWC,KACXmB,EAAW,MAAI,GAEdC,MAAMC,WAAWrB,KAAQF,EAAaE,KACvCmB,EAAU,KAAI,GAEXA,GAePG,WAbJ,SAAoBtB,GAChB,IAAImB,EAAO,SAMX,OALIpB,EAAWC,GACXmB,EAAO,OACCC,MAAMC,WAAWrB,KAAQF,EAAaE,KAC9CmB,EAAO,OAEJA","file":"../../global/datecontroll.js","sourcesContent":["define([\n    './validate',\n    'skylark-moment'\n], function (m_validate, dayjs) {\n    'use strict';\n    const {hasChinaword} = m_validate;\n    function isdatetime(s) {\n        if (s == null || s.toString().length < 5) {\n            return false;\n        } else if (checkDateTime(s)) {\n            return true;\n        } else {\n            return false;\n        }\n        function checkDateTime(str) {\n            var reg1 = /^(\\d{4})-(\\d{1,2})-(\\d{1,2})(\\s(\\d{1,2}):(\\d{1,2})(:(\\d{1,2}))?)?$/;\n            var reg2 = /^(\\d{4})\\/(\\d{1,2})\\/(\\d{1,2})(\\s(\\d{1,2}):(\\d{1,2})(:(\\d{1,2}))?)?$/;\n            if (!reg1.test(str) && !reg2.test(str)) {\n                return false;\n            }\n            var year = RegExp.$1, month = RegExp.$2, day = RegExp.$3;\n            if (year < 1900) {\n                return false;\n            }\n            if (month > 12) {\n                return false;\n            }\n            if (day > 31) {\n                return false;\n            }\n            if (month == 2) {\n                if (new Date(year, 1, 29).getDate() == 29 && day > 29) {\n                    return false;\n                } else if (new Date(year, 1, 29).getDate() != 29 && day > 28) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }\n    function diff(now, then) {\n        return dayjs(now).diff(dayjs(then));\n    }\n    function isdatatypemulti(s) {\n        let type = {};\n        if (isdatetime(s)) {\n            type['date'] = true;\n        }\n        if (!isNaN(parseFloat(s)) && !hasChinaword(s)) {\n            type['num'] = true;\n        }\n        return type;\n    }\n    function isdatatype(s) {\n        let type = 'string';\n        if (isdatetime(s)) {\n            type = 'date';\n        } else if (!isNaN(parseFloat(s)) && !hasChinaword(s)) {\n            type = 'num';\n        }\n        return type;\n    }\n    return {\n        isdatetime,\n        diff,\n        isdatatypemulti,\n        isdatatype\n    };\n});"]}